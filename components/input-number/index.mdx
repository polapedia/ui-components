import {
  Meta,
  Primary,
  Controls,
  Canvas,
  Story,
  ArgTypes,
} from "@storybook/addon-docs/blocks";
import InputNumber from ".";
import * as InputNumberStories from "./index.stories";

<Meta of={InputNumberStories} />

# InputNumber

The **InputNumber** component is a numeric stepper that lets users increase or decrease a numeric value using plus/minus controls, **and edit the value directly by clicking on it and typing with the keyboard**.

It supports multiple sizes, visual variants, min/max clamping, custom step values, and both controlled and locally managed state patterns.

---

## Playground

Use the **Controls** panel to explore props such as  
`size`, `variant`, `value`, `min`, `max`, `step`, and `disabled`.

Tip: Click on the number itself to edit the value directly.

<Canvas>
  <Primary />
</Canvas>

<Controls />

Use the **Controls** panel to explore props such as  
`size`, `variant`, `value`, `min`, `max`, `step`, and `disabled`.

---

## Variants & Features

### Visual Variants

InputNumber supports three visual variants:

- **default** - circular buttons on both sides of the value
- **fill** - solid background container
- **stroke** - outlined container

<Canvas of={InputNumberStories.Variants} />

---

### Interactive (Controlled via Args)

Syncs Storybook controls (`value`) with the component.
Useful to see how **controlled components** behave in a parent-managed state.

<Canvas of={InputNumberStories.InteractiveControlled} />

---

## Manual Input (Inline Editing)

In addition to using the plus/minus buttons, users can **edit the value directly**:

- Click on the displayed number to enter **edit mode**
- Type a numeric value using the keyboard
- Press **Enter** or click outside the input to apply the change
- Press **Escape** to cancel and restore the previous value

The same validation rules apply:

- Invalid or non-numeric input is ignored
- Values are clamped to `min` / `max` when committed

---

### Interactive (Local State)

Uses internal React `useState` to manage the value locally.  
This demonstrates how InputNumber is typically used in forms or UIs in your app.

<Canvas of={InputNumberStories.InteractiveLocalState} />

---

## Sizes

InputNumber supports multiple sizes for different layouts:

- **sm** - very compact steppers
- **md** - default size
- **lg** - more prominent for key actions
- **xl** - large and highly legible
- **2xl** - extra large, suitable for dashboards or touch interfaces

<Canvas of={InputNumberStories.Sizes} />

---

## Interaction & Behavior

- The component is **fully controlled** via the `value` prop.
- Changes are emitted through `onChange(value: number)`.
- Clicking on the displayed value switches the component into an **inline edit mode**, allowing direct keyboard input.
- Clicking **minus**/ **plus** will:
  - Adjust the value by `step` (default: `1`).
  - Respect `min` and `max` via internal clamping.
- Typing directly in the input:
  - Parses the value as a number.
  - Ignores invalid (non-numeric) input.
  - Applies the same `min`/`max` clamping logic.
- When `disabled` is `true`:
  - Buttons and input become non-interactive.
  - Visual styles are muted.
- Minus/plus buttons are automatically disabled when the current value reaches the `min` or `max`.

---

## Props

<ArgTypes of={InputNumberStories} />

Key props:

- `size?: "sm" | "md" | "lg" | "xl" | "2xl"` - visual height & font size.
- `variant?: "default" | "fill" | "stroke"` - visual styling of container & controls.
- `value: number` - current numeric value (required, controlled).
- `min?: number` - minimum allowed value.
- `max?: number` - maximum allowed value.
- `step?: number` - increment/decrement value (default: `1`).
- `disabled?: boolean` - disables all interactions.
- `onChange?(value: number)` - emitted whenever the value changes.

---

## Usage Guidelines

- Use **InputNumber** when:
  - The value is strictly numeric.
  - Increment/decrement with fixed steps makes sense (e.g., quantity, counter, score).
- Prefer using `min` and `max` to prevent invalid ranges.
- Choose variants based on context:
  - **default** for general usage in forms and cards.
  - **fill** for emphasis on dark backgrounds or key metrics.
  - **stroke** when aligning with outlined input styles.
- Use larger sizes (`xl`, `2xl`) for:
  - Touch interfaces
  - Prominent dashboard counters
- Keep `step` intuitive (e.g., 1, 5, 10) so users can predict how the value changes.

---

## Accessibility

- Uses a semantic `<input type="number">` element to support native browser behavior.
- The displayed value text is always in sync with the input for clarity.
- Ensure you provide a corresponding `<label>` or `aria-label` from the parent context.
- When used within forms:
  - Associate `name` for form submissions.
  - Consider validation messages around ranges (`min`/`max`) for screen reader users.
